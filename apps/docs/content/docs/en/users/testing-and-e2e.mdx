---
title: Testing and E2E
description: Validate correctness before rollout and keep regression risk low.
---

## Local baseline

```bash
pnpm test
pnpm typecheck
pnpm build
```

## Full E2E run

```bash
pnpm e2e:mcp
```

## What E2E validates

- Permission matrix behavior
- Safe update conflict handling
- Comment and export flows
- Membership flow (when target IDs are configured)
- Cleanup policy after test run

## Useful E2E environment variables

| Variable | Purpose |
|---|---|
| `OUTLINE_E2E_RUN_WRITE` | enable/disable write scenarios |
| `OUTLINE_E2E_COLLECTION_ID` | fixed test collection (optional) |
| `OUTLINE_E2E_EXPORT_COLLECTION_ID` | export target collection |
| `OUTLINE_E2E_MEMBER_COLLECTION_ID` | membership scenario target |
| `OUTLINE_E2E_MEMBER_USER_ID` | user membership scenario |
| `OUTLINE_E2E_MEMBER_GROUP_ID` | group membership scenario |

If `OUTLINE_E2E_COLLECTION_ID` is missing, the script provisions and cleans up a temporary collection automatically.

## CI recommendations

- Always run typecheck + tests
- Run E2E on protected branches
- Keep E2E write tests in isolated workspaces
