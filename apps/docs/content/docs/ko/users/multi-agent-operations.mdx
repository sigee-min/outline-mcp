---
title: 멀티 에이전트 운영
description: 동시 편집과 오케스트레이션을 위한 안전한 패턴을 설명합니다.
---

## 패턴 A: revision 기반 안전 수정

1. `read_document`
2. 현재 `revision` 기록
3. `safe_update_document(expected_revision=...)` 호출
4. 충돌 시 재조회 후 의도적으로 재시도

## 패턴 B: lease 소유권 제어

여러 에이전트가 같은 문서를 동시에 수정할 수 있다면 lease 도구를 사용하세요.

- `acquire_document_lease`
- `renew_document_lease`
- `release_document_lease`

프로세스 간 조정이 필요하면 `data_attribute` 전략을 권장합니다.

## 패턴 C: 역할 분리

- Coordinator: 컬렉션/템플릿 오케스트레이션
- Worker: 문서 단위 쓰기 작업
- Auditor: 이벤트/리비전/export 검증

이 구조는 권한 오남용을 줄이는 데 효과적입니다.
